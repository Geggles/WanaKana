!function(r,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(r.wanakana=r.wanakana||{})}(this,function(r){"use strict";function t(r,t){function e(r,t){if(void 0!==r[t])return Object.assign({"":r[""]+t},r[t])}function n(r,t){var e=r.charAt(0);return a(Object.assign({"":e},o[e]),r.slice(1),t,t+1)}function a(r,t,o,u){if(!t)return i||1===Object.keys(r).length?r[""]?[[o,u,r[""]]]:[]:[[o,u,null]];if(1===Object.keys(r).length)return[[o,u,r[""]]].concat(n(t,u));var c=e(r,t.charAt(0));return void 0===c?[[o,u,r[""]]].concat(n(t,u)):a(c,t.slice(1),o,u+1)}var i=2>=arguments.length||void 0===arguments[2]||arguments[2],o=t;return n(r,0)}function e(r){var t={},n=!0,a=!1,i=void 0;try{for(var o,u=Object.entries(r)[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var c=Y(o.value,2),l=c[0],f=c[1];t[l]="string"==typeof f?{"":f}:e(f)}}catch(r){a=!0,i=r}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return t}function n(r,t){var e=r,n=!0,a=!1,i=void 0;try{for(var o,u=t[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var c=o.value;void 0===e[c]&&(e[c]={}),e=e[c]}}catch(r){a=!0,i=r}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return e}function a(r){var t={},e=!0,n=!1,a=void 0;try{for(var i,o=Object.entries(r)[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var u=Y(i.value,2),c=u[0],l=u[1],f=t,v=!0,y=!1,s=void 0;try{for(var h,d=c[Symbol.iterator]();!(v=(h=d.next()).done);v=!0){var g=h.value;void 0===f[g]&&(f[g]={}),f=f[g]}}catch(r){y=!0,s=r}finally{try{!v&&d.return&&d.return()}finally{if(y)throw s}}f[""]=l}}catch(r){n=!0,a=r}finally{try{!e&&o.return&&o.return()}finally{if(n)throw a}}return function(r){function e(r,t){if(void 0===r||"string"==typeof r)return t;var n=r,a=!0,i=!1,o=void 0;try{for(var u,c=Object.entries(t)[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=Y(u.value,2),f=l[0];n[f]=e(r[f],l[1])}}catch(r){i=!0,o=r}finally{try{!a&&c.return&&c.return()}finally{if(i)throw o}}return n}return e(JSON.parse(JSON.stringify(r)),t)}}function i(r){return"string"!=typeof r||!r.length}function o(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],e=arguments[2];if(i(r))return!1;var n=r.charCodeAt(0);return n>=t&&e>=n}function u(){return o(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",mr,wr)}function c(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!i(r)&&[].concat(Z(r)).every(u)}function l(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!i(r)&&r.charCodeAt(0)===jr}function f(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!i(r)&&r.charCodeAt(0)===Or}function v(){for(var r=[],t="",e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(""),n=0;e.length>n;n+=1){var a=e[n],i=[f(a),l(a)],o=i[1];if(i[0]||o&&1>n)r.push(a);else if(t&&o&&n>0){var c=kr[t].slice(-1);r.push(Sr[c])}else if(!o&&u(a)){var v=a.charCodeAt(0)+(dr-mr),y=String.fromCharCode(v);r.push(y),t=y}else r.push(a),t=""}return r.join("")}function y(){function r(t){var e={},n=!0,a=!1,i=void 0;try{for(var o,u=Object.entries(t)[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var c=Y(o.value,2),l=c[0],f=c[1];if(l)e[l]=r(f);else{var v=ar,y=!0,s=!1,h=void 0;try{for(var d,g=f[Symbol.iterator]();!(y=(d=g.next()).done);y=!0){var m=v[d.value];if(void 0===m){e[""]=v[""]+f;break}v=m}}catch(r){s=!0,h=r}finally{try{!y&&g.return&&g.return()}finally{if(s)throw h}}}}}catch(r){a=!0,i=r}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return e}var t=e({"あ":"a","い":"i","う":"u","え":"e","お":"o","か":"ka","き":"ki","く":"ku","け":"ke","こ":"ko","さ":"sa","し":"shi","す":"su","せ":"se","そ":"so","た":"ta","ち":"chi","つ":"tsu","て":"te","と":"to","な":"na","に":"ni","ぬ":"nu","ね":"ne","の":"no","は":"ha","ひ":"hi","ふ":"fu","へ":"he","ほ":"ho","ま":"ma","み":"mi","む":"mu","め":"me","も":"mo","や":"ya","ゆ":"yu","よ":"yo","ら":"ra","り":"ri","る":"ru","れ":"re","ろ":"ro","わ":"wa","ゐ":"wi","ゑ":"we","を":"wo","が":"ga","ぎ":"gi","ぐ":"gu","げ":"ge","ご":"go","ざ":"za","じ":"ji","ず":"zu","ぜ":"ze","ぞ":"zo","だ":"da","ぢ":"ji","づ":"zu","で":"de","ど":"do","ば":"ba","び":"bi","ぶ":"bu","べ":"be","ぼ":"bo","ぱ":"pa","ぴ":"pi","ぷ":"pu","ぺ":"pe","ぽ":"po","ゔぁ":"va","ゔぃ":"vi","ゔ":"vu","ゔぇ":"ve","ゔぉ":"vo","ん":"n"}),a=function(r){return n(t,r)},i=!0,o=!1,u=void 0;try{for(var c,l=Object.entries({"。":".","、":",","：":":","・":"/","！":"!","？":"?","〜":"~","ー":"-","「":"‘","」":"’","『":"“","』":"”","［":"[","］":"]","（":"(","）":")","｛":"{","｝":"}","　":" "})[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var f=Y(c.value,2),v=f[1];a(f[0])[""]=v}}catch(r){o=!0,u=r}finally{try{!i&&l.return&&l.return()}finally{if(o)throw u}}var y={"ゃ":"ya","ゅ":"yu","ょ":"yo"},s={"ぃ":"yi","ぇ":"ye"},h=!0,d=!1,g=void 0;try{for(var m,w=Object.entries(y).concat(Object.entries({"ぁ":"a","ぃ":"i","ぅ":"u","ぇ":"e","ぉ":"o"}))[Symbol.iterator]();!(h=(m=w.next()).done);h=!0){var b=Y(m.value,2),p=b[1];a(b[0])[""]=p}}catch(r){d=!0,g=r}finally{try{!h&&w.return&&w.return()}finally{if(d)throw g}}var j=!0,O=!1,S=void 0;try{for(var k,x=["き","に","ひ","み","り","ぎ","び","ぴ","ゔ","く","ふ"][Symbol.iterator]();!(j=(k=x.next()).done);j=!0){var A=k.value,z=a(A)[""][0],E=!0,M=!1,R=void 0;try{for(var C,K=Object.entries(y)[Symbol.iterator]();!(E=(C=K.next()).done);E=!0){var N=Y(C.value,2),P=N[1];a(A+N[0])[""]=z+P}}catch(r){M=!0,R=r}finally{try{!E&&K.return&&K.return()}finally{if(M)throw R}}var q=!0,J=!1,T=void 0;try{for(var I,L=Object.entries(s)[Symbol.iterator]();!(q=(I=L.next()).done);q=!0){var U=Y(I.value,2),H=U[1];a(A+U[0])[""]=z+H}}catch(r){J=!0,T=r}finally{try{!q&&L.return&&L.return()}finally{if(J)throw T}}}}catch(r){O=!0,S=r}finally{try{!j&&x.return&&x.return()}finally{if(O)throw S}}var _=!0,B=!1,D=void 0;try{for(var W,X=Object.entries({"し":"sh","ち":"ch","じ":"j","ぢ":"j"})[Symbol.iterator]();!(_=(W=X.next()).done);_=!0){var F=Y(W.value,2),G=F[0],Q=F[1],V=!0,Z=!1,$=void 0;try{for(var rr,tr=Object.entries(y)[Symbol.iterator]();!(V=(rr=tr.next()).done);V=!0){var er=Y(rr.value,2),nr=er[1];a(G+er[0])[""]=Q+nr[1]}}catch(r){Z=!0,$=r}finally{try{!V&&tr.return&&tr.return()}finally{if(Z)throw $}}a(G+"ぃ")[""]=Q+"yi",a(G+"ぇ")[""]=Q+"e"}}catch(r){B=!0,D=r}finally{try{!_&&X.return&&X.return()}finally{if(B)throw D}}var ar=e({b:"b",ch:"t",d:"d",f:"f",g:"g",h:"h",j:"j",k:"k",m:"m",p:"p",q:"q",r:"r",s:"s",sh:"s",t:"t",ts:"t",v:"v",w:"w",x:"x",z:"z"});ar[""]="",t["っ"]=r(t);var ir=!0,or=!1,ur=void 0;try{for(var cr,lr=Object.entries({"っ":"","ゎ":"wa","ゕ":"ka","ゖ":"ka","ゃ":"ya","ゅ":"yu","ょ":"yo","ぁ":"a","ぃ":"i","ぅ":"u","ぇ":"e","ぉ":"o"})[Symbol.iterator]();!(ir=(cr=lr.next()).done);ir=!0){var fr=Y(cr.value,2),vr=fr[1];a(fr[0])[""]=vr}}catch(r){or=!0,ur=r}finally{try{!ir&&lr.return&&lr.return()}finally{if(or)throw ur}}return Object.freeze(JSON.parse(JSON.stringify(t)))}function s(){return null===rr&&(rr=y()),rr}function h(r){switch(r.romanization){case $.HEPBURN:return g(r);default:return function(r){var t=Y(r,2);return[t[0],t[1]]}}}function d(r){switch(r.romanization){case $.HEPBURN:return s(r);default:return{}}}function g(r){return function(t){for(var e=Y(t,2),n=e[0],a=e[1],i=["b","m","p"],o=["a","i","u","e","o","y"],u=JSON.parse(JSON.stringify(a)),l=0;a.length>l;l+=1){if("ん"===v(n.charAt(a[l][0]))){var f=a[l+1];if(void 0!==f){var y=f[2].charAt(0);switch(!0){case i.includes(y):u[l][2]="m";break;case o.includes(y):u[l][2]="n'"}}}if(r.upcaseKatakana){var s=Y(u[l],3),h=s[2];c(n.slice(s[0],s[1]))&&(u[l][2]=h.toUpperCase())}}return[n,u]}}function m(){return[].concat(Z(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")).map(function(r,t){var e=r.charCodeAt(0),n=o(r,vr,yr),a=o(r,sr,hr);return n?String.fromCharCode(e-vr+cr):a?String.fromCharCode(e-sr+lr):r}).join("")}function w(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=1>=arguments.length||void 0===arguments[1]||arguments[1];if(i(r))return!1;var e=t?/[bcdfghjklmnpqrstvwxyz]/:/[bcdfghjklmnpqrstvwxz]/;return-1!==r.toLowerCase().charAt(0).search(e)}function b(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!i(r)&&o(r,lr,fr)}function p(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!i(r)&&(!!l(r)||o(r,dr,gr))}function j(){var r=[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("").forEach(function(t){if(l(t)||f(t))r.push(t);else if(p(t)){var e=t.charCodeAt(0)+(mr-dr),n=String.fromCharCode(e);r.push(n)}else r.push(t)}),r.join("")}function O(){function r(t){var e={},n=!0,a=!1,i=void 0;try{for(var o,u=Object.entries(t)[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var c=Y(o.value,2),l=c[0],f=c[1];e[l]=l?r(f):"っ"+f}}catch(r){a=!0,i=r}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return e}var t=e({a:"あ",i:"い",u:"う",e:"え",o:"お",k:{a:"か",i:"き",u:"く",e:"け",o:"こ"},s:{a:"さ",i:"し",u:"す",e:"せ",o:"そ"},t:{a:"た",i:"ち",u:"つ",e:"て",o:"と"},n:{a:"な",i:"に",u:"ぬ",e:"ね",o:"の"},h:{a:"は",i:"ひ",u:"ふ",e:"へ",o:"ほ"},m:{a:"ま",i:"み",u:"む",e:"め",o:"も"},y:{a:"や",u:"ゆ",o:"よ"},r:{a:"ら",i:"り",u:"る",e:"れ",o:"ろ"},w:{a:"わ",i:"ゐ",e:"ゑ",o:"を"},g:{a:"が",i:"ぎ",u:"ぐ",e:"げ",o:"ご"},z:{a:"ざ",i:"じ",u:"ず",e:"ぜ",o:"ぞ"},d:{a:"だ",i:"ぢ",u:"づ",e:"で",o:"ど"},b:{a:"ば",i:"び",u:"ぶ",e:"べ",o:"ぼ"},p:{a:"ぱ",i:"ぴ",u:"ぷ",e:"ぺ",o:"ぽ"},v:{a:"ゔぁ",i:"ゔぃ",u:"ゔ",e:"ゔぇ",o:"ゔぉ"}}),a=function(r){return n(t,r)},i={k:"き",s:"し",t:"ち",n:"に",h:"ひ",m:"み",r:"り",g:"ぎ",z:"じ",d:"ぢ",b:"び",p:"ぴ",v:"ゔ",q:"く",f:"ふ"},o={ya:"ゃ",yi:"ぃ",yu:"ゅ",ye:"ぇ",yo:"ょ"},u={a:"ぁ",i:"ぃ",u:"ぅ",e:"ぇ",o:"ぉ"},c=!0,l=!1,f=void 0;try{for(var v,y=Object.entries(i)[Symbol.iterator]();!(c=(v=y.next()).done);c=!0){var s=Y(v.value,2),h=s[0],d=s[1],g=!0,m=!1,w=void 0;try{for(var b,p=Object.entries(o)[Symbol.iterator]();!(g=(b=p.next()).done);g=!0){var j=Y(b.value,2),O=j[1];a(h+j[0])[""]=d+O}}catch(r){m=!0,w=r}finally{try{!g&&p.return&&p.return()}finally{if(m)throw w}}}}catch(r){l=!0,f=r}finally{try{!c&&y.return&&y.return()}finally{if(l)throw f}}var S=!0,k=!1,x=void 0;try{for(var A,z=Object.entries({".":"。",",":"、",":":"：","/":"・","!":"！","?":"？","~":"〜","-":"ー","‘":"「","’":"」","“":"『","”":"』","[":"［","]":"］","(":"（",")":"）","{":"｛","}":"｝"})[Symbol.iterator]();!(S=(A=z.next()).done);S=!0){var E=Y(A.value,2),M=E[1];a(E[0])[""]=M}}catch(r){k=!0,x=r}finally{try{!S&&z.return&&z.return()}finally{if(k)throw x}}var R=!0,C=!1,K=void 0;try{for(var N,P=Object.entries({wh:"う",qw:"く",q:"く",gw:"ぐ",sw:"す",ts:"つ",th:"て",tw:"と",dh:"で",dw:"ど",fw:"ふ",f:"ふ"})[Symbol.iterator]();!(R=(N=P.next()).done);R=!0){var q=Y(N.value,2),J=q[0],T=q[1],I=!0,L=!1,U=void 0;try{for(var H,_=Object.entries(u)[Symbol.iterator]();!(I=(H=_.next()).done);I=!0){var B=Y(H.value,2),D=B[1];(Hr=a(J+B[0]))[""]=T+D}}catch(r){L=!0,U=r}finally{try{!I&&_.return&&_.return()}finally{if(L)throw U}}}}catch(r){C=!0,K=r}finally{try{!R&&P.return&&P.return()}finally{if(C)throw K}}for(var W=["n","n'","xn"],X=0;W.length>X;X++)a(W[X])[""]="ん";var F={sh:"sy",ch:"ty",cy:"ty",chy:"ty",shy:"sy",j:"zy",jy:"zy",shi:"si",chi:"ti",tsu:"tu",ji:"zi",fu:"hu"};t.c=JSON.parse(JSON.stringify(t.k));var G=!0,Q=!1,V=void 0;try{for(var Z,$=Object.entries(F)[Symbol.iterator]();!(G=(Z=$.next()).done);G=!0){var rr=Y(Z.value,2),tr=rr[0],er=rr[1],nr=tr.slice(0,tr.length-1),ar=tr.charAt(tr.length-1);a(nr)[ar]=JSON.parse(JSON.stringify(a(er)))}}catch(r){Q=!0,V=r}finally{try{!G&&$.return&&$.return()}finally{if(Q)throw V}}var ir=Object.assign({tu:"っ",wa:"ゎ",ka:"ヵ",ke:"ヶ"},u,o),or=!0,ur=!1,cr=void 0;try{for(var lr,fr=Object.entries(ir)[Symbol.iterator]();!(or=(lr=fr.next()).done);or=!0){var vr=Y(lr.value,2),yr=vr[0],sr=vr[1],hr=a("x"+yr);hr[""]=sr;var dr=yr.slice(0,yr.length-1),gr=yr.charAt(yr.length-1);a("l"+dr)[gr]=hr;var mr=!0,wr=!1,br=void 0;try{for(var pr,jr=function(r){var t=[],e=!0,n=!1,a=void 0;try{for(var i,o=Object.entries(F).concat([["c","k"]])[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var u=Y(i.value,2),c=u[0],l=u[1];r.startsWith(l)&&t.push(r.replace(l,c))}}catch(r){n=!0,a=r}finally{try{!e&&o.return&&o.return()}finally{if(n)throw a}}return t}(yr)[Symbol.iterator]();!(mr=(pr=jr.next()).done);mr=!0)for(var Or=pr.value,Sr=Or.slice(0,Or.length-1),kr=Or.charAt(Or.length-1),xr=["l","x"],Ar=0;xr.length>Ar;Ar++){var zr=xr[Ar];a(zr+Sr)[kr]=a(zr+yr)}}catch(r){wr=!0,br=r}finally{try{!mr&&jr.return&&jr.return()}finally{if(wr)throw br}}}}catch(r){ur=!0,cr=r}finally{try{!or&&fr.return&&fr.return()}finally{if(ur)throw cr}}var Er=!0,Mr=!1,Rr=void 0;try{for(var Cr,Kr=Object.entries({yi:"い",wu:"う",ye:"いぇ",wi:"うぃ",we:"うぇ",kwa:"くぁ",whu:"う",tha:"てゃ",thu:"てゅ",tho:"てょ",dha:"でゃ",dhu:"でゅ",dho:"でょ"})[Symbol.iterator]();!(Er=(Cr=Kr.next()).done);Er=!0){var Nr=Y(Cr.value,2),Pr=Nr[1];a(Nr[0])[""]=Pr}}catch(r){Mr=!0,Rr=r}finally{try{!Er&&Kr.return&&Kr.return()}finally{if(Mr)throw Rr}}var qr=!0,Jr=!1,Tr=void 0;try{for(var Ir,Lr=Object.keys(i).concat("c","y","w","j")[Symbol.iterator]();!(qr=(Ir=Lr.next()).done);qr=!0){var Ur=Ir.value,Hr=t[Ur];Hr[Ur]=r(Hr)}}catch(r){Jr=!0,Tr=r}finally{try{!qr&&Lr.return&&Lr.return()}finally{if(Jr)throw Tr}}return delete t.n.n,Object.freeze(JSON.parse(JSON.stringify(t)))}function S(r){return null===xr&&(xr=O()),xr}function k(r){return function(t){var e=Y(t,2),n=e[0];return[n,e[1].map(function(t){var e=Y(t,3),a=e[0],i=e[1],o=e[2];return null===o?[a,i,n.slice(a)]:!r.ignoreCase&&b(n.charAt(a))?[a,i,j(o)]:t})]}}function x(r){var t=JSON.parse(JSON.stringify(r));return t.n.n={"":"ん"},t.n[" "]={"":"ん"},t}function A(){return z(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).map(function(r){return r[2]}).join("")}function z(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=Object.assign({},tr,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),n=k(e),a=S(e);a=e.IMEMode?x(a):a,a=e.useObsoleteKana?Ar(a):a,a=e.customKanaMapping(a);var i=n([r,t(r.toLowerCase(),a,!e.IMEMode)]);return(i=e.customKanaPostProcessing(i))[1]}function E(r){var t=Object.assign({},tr,r);return function(r){var e=r.target;if(Rr)Rr=!1;else{var n=m(e.value),a=z(N(n,t.IMEMode),Object.assign({},t,{IMEMode:!0})),i=a.map(function(r){return r[2]}).join("");if(n!==i){var o=e.selectionEnd;if(e.value=i,null!==e.setSelectionRange&&"number"==typeof e.selectionStart){if(0===o)e.setSelectionRange(0,0);else{e.setSelectionRange(e.value.length,e.value.length);for(var u=0,c=0;a.length>c;c+=1){var l=Y(a[c],3);if(u+=l[2].length,l[1]>=o){e.setSelectionRange(u,u);break}}}return}if(null!=e.createTextRange){e.focus();var f=e.createTextRange();f.collapse(!1),f.select()}}}}}function M(r){var t=r.data||r.detail&&r.detail.data,e=t&&t.slice(-2).split("")||[],n="n"===e[0],a=e.every(function(r){return w(m(r))});Rr=!n&&a}function R(r,t){return Er.concat({id:t,handler:r})}function C(r){return r&&Er.find(function(t){return t.id===r.getAttribute("data-wanakana-id")})}function K(r){var t=r.id;return Er.filter(function(r){return r.id!==t})}function N(r,t){switch(!0){case"toHiragana"===t:return r.toLowerCase();case"toKatakana"===t:return r.toUpperCase();default:return r}}function P(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!i(r)&&or.some(function(t){var e=Y(t,2);return o(r,e[0],e[1])})}function q(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!i(r)&&[].concat(Z(r)).every(P)}function J(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return ir.some(function(t){var e=Y(t,2);return o(r,e[0],e[1])})}function T(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!i(r)&&[].concat(Z(r)).every(J)}function I(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!i(r)&&(p(r)||u(r))}function L(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!i(r)&&[].concat(Z(r)).every(I)}function U(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!i(r)&&[].concat(Z(r)).every(p)}function H(){return o(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",br,pr)}function _(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!i(r)&&[].concat(Z(r)).every(H)}function B(){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{passKanji:!0},t=[].concat(Z(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")),e=!1;return r.passKanji||(e=t.some(_)),(t.some(U)||t.some(c))&&t.some(q)&&!e}function D(){return A(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",Object.assign({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{ignoreCase:!0}))}function W(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Object.assign({},tr,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});return t.passRomaji?v(r):q(r)?D(r,t):B(r,{passKanji:!0})?D(v(r),t):v(r)}function X(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=Object.assign({},tr,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),n=h(e),a=d(e);a=e.customRomajiMapping(a);var i=n([r,t(W(r,{passRomaji:!0}),a,!e.IMEMode)]);return(i=e.customRomajiPostProcessing(i))[1]}function F(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!i(r)&&ur.some(function(t){var e=Y(t,2);return o(r,e[0],e[1])})}function G(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!i(r)&&ar.some(function(t){var e=Y(t,2);return o(r,e[0],e[1])})}function Q(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!i(r)&&(F(r)||G(r))}function V(r){switch(!0){case G(r):return"japanesePunctuation";case H(r):return"kanji";case p(r):return"hiragana";case u(r):return"katakana";default:return"romaji"}}var Y=function(){function r(r,t){var e=[],n=!0,a=!1,i=void 0;try{for(var o,u=r[Symbol.iterator]();!(n=(o=u.next()).done)&&(e.push(o.value),!t||e.length!==t);n=!0);}catch(r){a=!0,i=r}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return e}return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return r(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Z=function(r){if(Array.isArray(r)){for(var t=0,e=Array(r.length);r.length>t;t++)e[t]=r[t];return e}return Array.from(r)},$=Object.freeze({HEPBURN:"hepburn"}),rr=null,tr={useObsoleteKana:!1,passRomaji:!1,upcaseKatakana:!1,ignoreCase:!1,IMEMode:!1,romanization:$.HEPBURN,customKanaMapping:function(r){return r},customKanaPostProcessing:function(r){var t=Y(r,2);return[t[0],t[1]]},customRomajiMapping:function(r){return r},customRomajiPostProcessing:function(r){var t=Y(r,2);return[t[0],t[1]]}},er=[65377,65381],nr=[[8216,8217],[8220,8221]],ar=[[12288,12351],er,[12539,12540],[65281,65295],[65306,65311],[65339,65343],[65371,65376],[65504,65518]],ir=[].concat([[12352,12447],[12448,12543],er,[65382,65439]],ar,[[48,57],[65296,65305],[19968,40959],[13312,19903]]),or=[[0,127]].concat([[256,257],[274,275],[298,299],[332,333],[362,363]],nr),ur=[[33,47],[58,63],[91,96],[123,126]].concat(nr),cr=97,lr=65,fr=90,vr=65345,yr=65370,sr=65313,hr=65338,dr=12353,gr=12438,mr=12449,wr=12540,br=19968,pr=40879,jr=12540,Or=12539,Sr={a:"あ",i:"い",u:"う",e:"え",o:"う"},kr={"　":" ","！":"!","？":"?","。":".","：":":","・":"/","、":",","〜":"~","ー":"-","「":"‘","」":"’","『":"“","』":"”","［":"[","］":"]","（":"(","）":")","｛":"{","｝":"}","あ":"a","い":"i","う":"u","え":"e","お":"o","ゔぁ":"va","ゔぃ":"vi","ゔ":"vu","ゔぇ":"ve","ゔぉ":"vo","か":"ka","き":"ki","きゃ":"kya","きぃ":"kyi","きゅ":"kyu","く":"ku","け":"ke","こ":"ko","が":"ga","ぎ":"gi","ぐ":"gu","げ":"ge","ご":"go","ぎゃ":"gya","ぎぃ":"gyi","ぎゅ":"gyu","ぎぇ":"gye","ぎょ":"gyo","さ":"sa","す":"su","せ":"se","そ":"so","ざ":"za","ず":"zu","ぜ":"ze","ぞ":"zo","し":"shi","しゃ":"sha","しゅ":"shu","しょ":"sho","じ":"ji","じゃ":"ja","じゅ":"ju","じょ":"jo","た":"ta","ち":"chi","ちゃ":"cha","ちゅ":"chu","ちょ":"cho","つ":"tsu","て":"te","と":"to","だ":"da","ぢ":"di","づ":"du","で":"de","ど":"do","な":"na","に":"ni","にゃ":"nya","にゅ":"nyu","にょ":"nyo","ぬ":"nu","ね":"ne","の":"no","は":"ha","ひ":"hi","ふ":"fu","へ":"he","ほ":"ho","ひゃ":"hya","ひゅ":"hyu","ひょ":"hyo","ふぁ":"fa","ふぃ":"fi","ふぇ":"fe","ふぉ":"fo","ば":"ba","び":"bi","ぶ":"bu","べ":"be","ぼ":"bo","びゃ":"bya","びゅ":"byu","びょ":"byo","ぱ":"pa","ぴ":"pi","ぷ":"pu","ぺ":"pe","ぽ":"po","ぴゃ":"pya","ぴゅ":"pyu","ぴょ":"pyo","ま":"ma","み":"mi","む":"mu","め":"me","も":"mo","みゃ":"mya","みゅ":"myu","みょ":"myo","や":"ya","ゆ":"yu","よ":"yo","ら":"ra","り":"ri","る":"ru","れ":"re","ろ":"ro","りゃ":"rya","りゅ":"ryu","りょ":"ryo","わ":"wa","を":"wo","ん":"n","ゐ":"wi","ゑ":"we","きぇ":"kye","きょ":"kyo","じぃ":"jyi","じぇ":"jye","ちぃ":"cyi","ちぇ":"che","ひぃ":"hyi","ひぇ":"hye","びぃ":"byi","びぇ":"bye","ぴぃ":"pyi","ぴぇ":"pye","みぇ":"mye","みぃ":"myi","りぃ":"ryi","りぇ":"rye","にぃ":"nyi","にぇ":"nye","しぃ":"syi","しぇ":"she","いぇ":"ye","うぁ":"wha","うぉ":"who","うぃ":"wi","うぇ":"we","ゔゃ":"vya","ゔゅ":"vyu","ゔょ":"vyo","すぁ":"swa","すぃ":"swi","すぅ":"swu","すぇ":"swe","すぉ":"swo","くゃ":"qya","くゅ":"qyu","くょ":"qyo","くぁ":"qwa","くぃ":"qwi","くぅ":"qwu","くぇ":"qwe","くぉ":"qwo","ぐぁ":"gwa","ぐぃ":"gwi","ぐぅ":"gwu","ぐぇ":"gwe","ぐぉ":"gwo","つぁ":"tsa","つぃ":"tsi","つぇ":"tse","つぉ":"tso","てゃ":"tha","てぃ":"thi","てゅ":"thu","てぇ":"the","てょ":"tho","とぁ":"twa","とぃ":"twi","とぅ":"twu","とぇ":"twe","とぉ":"two","ぢゃ":"dya","ぢぃ":"dyi","ぢゅ":"dyu","ぢぇ":"dye","ぢょ":"dyo","でゃ":"dha","でぃ":"dhi","でゅ":"dhu","でぇ":"dhe","でょ":"dho","どぁ":"dwa","どぃ":"dwi","どぅ":"dwu","どぇ":"dwe","どぉ":"dwo","ふぅ":"fwu","ふゃ":"fya","ふゅ":"fyu","ふょ":"fyo","ぁ":"a","ぃ":"i","ぇ":"e","ぅ":"u","ぉ":"o","ゃ":"ya","ゅ":"yu","ょ":"yo","っ":"","ゕ":"ka","ゖ":"ka","ゎ":"wa","んあ":"n'a","んい":"n'i","んう":"n'u","んえ":"n'e","んお":"n'o","んや":"n'ya","んゆ":"n'yu","んよ":"n'yo"},xr=null,Ar=a({wi:"ゐ",we:"ゑ"}),zr=["TEXTAREA","INPUT"],Er=[],Mr=0,Rr=!1,Cr=function(){return Mr+=1,""+Date.now()+Mr};r.bind=function(r){var t=E(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(r instanceof Element&&zr.includes(r.nodeName)){var e=Cr();r.setAttribute("data-wanakana-id",e),r.autocapitalize="none",r.addEventListener("compositionupdate",M),r.addEventListener("input",t),Er=R(t,e)}else console.warn("Input provided to wanakana.bind was not a valid input field.")},r.unbind=function(r){var t=C(r);null!=t?(r.removeAttribute("data-wanakana-id"),r.removeEventListener("compositionupdate",M),r.removeEventListener("input",t.handler),Er=K(t)):console.warn("Input had no listener registered.")},r.isRomaji=q,r.isJapanese=T,r.isKana=L,r.isHiragana=U,r.isKatakana=c,r.isMixed=B,r.isKanji=_,r.toRomaji=function(){return X(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).map(function(r){return r[2]}).join("")},r.toKana=A,r.toHiragana=W,r.toKatakana=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Object.assign({},tr,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});return j(t.passRomaji?r:q(r)||B(r)?D(r,t):r)},r.stripOkurigana=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{all:!1};if(i(r)||!T(r)||L(r))return r;var e=[].concat(Z(r));if(t.all)return e.filter(function(r){return!I(r)}).join("");for(var n=e.reverse(),a=0,o=n.length;o>a;a+=1){var u=n[a];if(!Q(u)){if(_(u))break;n[a]=""}}return n.reverse().join("")},r.tokenize=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(i(r))return[""];var t=[].concat(Z(r)),e=t.shift(),n=V(e);return t.reduce(function(r,t){var e=V(t)===n;if(n=V(t),e){var a=r.pop();return r.concat(a.concat(t))}return r.concat(t)},[e])},r.applyMapping=t,r.transform=e,r.getSubTreeOf=n,r.createCustomMapping=a,r.methods=$,r.getRomajiPostProcessing=h,r.getKanaToRomajiTree=d,r.getRomajiToKanaTree=S,r.getKanaPostProcessing=k,r.USE_OBSOLETE_KANA_MAP=Ar,r.IME_MODE_MAP=x,Object.defineProperty(r,"__esModule",{value:!0})});
